var af;!function(s){"undefined"!=typeof acf?((af={forms:{},setup_form:function(e){var a=e.attr("data-key"),t={$el:e,key:a,submissionSteps:[]};this.pages.initialize(t),this.ajax.initialize(t),this.forms[a]=t;var n=this;t.$el.on("submit",function(e){e.preventDefault(),af.lock(t);e=t.$el.data("acf");e&&e.set("status",""),acf.validation.fetch({form:t.$el,failure:function(){af.unlock(t)},success:function(){var e=t.submissionSteps.slice();n.executeSubmissionSteps(t,e)},complete:function(){t.$el.find(".af-submit-button").prop("disabled",!1)}})}),acf.doAction("af/form/setup",t)},lock(e){e.$el.find(".af-submit-button").prop("disabled",!0),acf.validation.lockForm(e.$el)},unlock(e){e.$el.find(".af-submit-button").prop("disabled",!1),acf.validation.unlockForm(e.$el)},addSubmissionStep(e,a,t){for(var n={priority:a,fn:t},i=0;i<e.submissionSteps.length;i++)if(a<e.submissionSteps[i].priority)return void e.submissionSteps.splice(i,0,n);e.submissionSteps.push(n)},executeSubmissionSteps(e,a){function t(){af.lock(e),e.$el.get(0).submit()}var n,i,c;0!=a.length?(n=a.shift(),i=this,c=0==a.length?t:function(){i.executeSubmissionSteps(e,a)},n.fn(c)):t()}}).pages={initialize:function(c){var e,f,a=this;$page_fields=c.$el.find(".acf-field-page"),$page_fields.exists()&&(c.pages=[],c.current_page=0,c.max_page=0,c.show_numbering=!0,c.$page_wrap=s('<div class="af-page-wrap">'),c.$page_wrap.insertBefore($page_fields.first()),c.$previous_button=$page_fields.first().find(".af-previous-button"),c.$next_button=$page_fields.first().find(".af-next-button"),c.show_numbering="true"===$page_fields.first().find(".af-page-button").attr("data-show-numbering"),c.$previous_button.click(function(e){e.preventDefault(),a.previousPage(c)}),c.$next_button.click(function(e){e.preventDefault(),a.nextPage(c)}),(e=c.$el.find(".af-submit")).prepend(c.$next_button),e.prepend(c.$previous_button),c.$submit_button=e.find(".af-submit-button"),f=0,$page_fields.each(function(e,a){var t=s(a),n=f,i=t.nextUntil(".acf-field-page",".acf-field");0!=i.length&&((a=t.find(".af-page-button").attr("data-index",n)).click(function(e){e.preventDefault(),af.pages.navigateToPage(n,c)}),c.show_numbering&&($index=s('<span class="index">').html(n+1),a.prepend($index)),c.$page_wrap.append(a),c.pages.push({$field:t,$fields:i,$button:a}),f++)}),this.refresh(c))},refresh:function(n){s.each(n.pages,function(e,a){var t=e==n.current_page;a.$button.toggleClass("enabled",e<=n.max_page),a.$button.toggleClass("current",t),a.$fields.each(function(){s(this).toggle(t)})});var e=this.isFirstPage(n),a=this.isLastPage(n);n.$previous_button.attr("disabled",!!e||null),n.$next_button.toggle(!a),n.$submit_button.toggle(a)},nextPage:function(e){var a;this.isLastPage(e)||(a=this).validatePage(e,e.current_page,function(){a.changePage(e.current_page+1,e)})},previousPage:function(e){this.isFirstPage(e)||this.changePage(e.current_page-1,e)},navigateToPage:function(e,a){var t;e<0||e>a.max_page||(t=this).validatePage(a,a.current_page,function(){t.changePage(e,a)})},changePage:function(e,a){var t=a.current_page;a.current_page=e,a.max_page<=a.current_page&&(a.max_page=a.current_page),this.refresh(a),acf.doAction("af/form/page_changed",e,t,a)},isFirstPage:function(e){return 0==e.current_page},isLastPage:function(e){return e.current_page==e.pages.length-1},validatePage:function(a,t,e){a.pages[t].$fields.find("input").each(function(){this.checkValidity()});function n(e){for(i=0;i<a.pages.length;i++)i!=t&&e(a.pages[i])}n(function(e){e.$fields.detach()});function c(){n(function(e){e.$fields.insertAfter(e.$field)})}acf.validation.fetch({form:a.$el,lock:!1,reset:!0,success:function(){c(),e()},failure:function(){c()}})}},af.ajax={initialize:function(a){var t=this;a.$el.is("[data-ajax]")&&af.addSubmissionStep(a,100,function(e){t.sendSubmission(a)})},sendSubmission:function(e){var a=new FormData(e.$el.get(0));a.append("action","af_submission"),s.ajax({url:acf.get("ajaxurl"),data:a,processData:!1,contentType:!1,type:"post",success:this.onSuccess(e),error:this.onError(e),complete:function(){af.unlock(e)}})},onSuccess:function(n){return function(e){var a=e.data;switch(acf.doAction("af/form/ajax/submission",a,n),a.type){case"success_message":var t=s(a.success_message);n.$el.find(".af-fields").replaceWith(t);break;case"redirect":window.location.href=a.redirect_url}}},onError:function(t){return function(e){var a=t.$el.data("acf"),e=e.responseJSON.data.errors;a.addErrors(e),a.showErrors()}}},s(document).ready(function(){s(".af-form").each(function(){af.setup_form(s(this))})})):console.error("acf-input.js not found. AF requires ACF to work.")}(jQuery),function(c){af.calculated={initialize:function(e){const a=e.$el.find(".acf-field-calculated");if(a.length){const i=function(){af.calculated.refresh(e,a)};i(),e.$el.change(i),acf.addAction("af/field/calculated/update_value",i),a.each(function(e,a){const t=c(a);var n=t.attr("data-name"),a=t.attr("data-key");acf.addAction("af/field/calculated/update_value/name="+n,i),acf.addAction("af/field/calculated/update_value/key="+a,i)})}},refresh:function(i,a){let e=acf.serialize(i.$el);e.action="af_calculated_field",e.calculated_fields=a.map(function(e,a){return c(a).attr("data-key")}).get().join(),e=acf.prepare_for_ajax(e),a.each(function(e,a){af.calculated.lockField(c(a))}),c.ajax({url:acf.get("ajaxurl"),data:e,type:"post",success:function(e){const n=JSON.parse(e);a.each(function(e,a){const t=c(a);a=t.attr("data-key"),a=n[a];af.calculated.updateField(i,t,a)})},complete:function(){a.each(function(e,a){af.calculated.unlockField(c(a))})}})},updateField:function(e,a,t){a.find("input.af-calculated-value").val(t),a.find(".af-calculated-content").html(t);var n=a.attr("data-name"),i=a.attr("data-key");acf.doAction("af/field/calculated/value_updated",t,a,e),acf.doAction("af/field/calculated/value_updated/name="+n,t,a,e),acf.doAction("af/field/calculated/value_updated/key="+i,t,a,e)},lockField:function(e){e.find(".af-input").css("opacity",.5)},unlockField:function(e){e.find(".af-input").css("opacity",1)}},af.recaptcha={initialize:function(t){var n,i=af.recaptcha.getSiteKey(t);null!==i&&(n=c('<div class="af-recaptcha-container">').attr("data-size","invisible"),t.$el.find(".af-submit").append(n),af.addSubmissionStep(t,5,function(a){unlockFormTimeout=setTimeout(function(){af.unlock(t)},2e3);var e=grecaptcha.render(n.get(0),{sitekey:i,callback:function(e){clearTimeout(unlockFormTimeout),af.lock(t);e=c('<input type="hidden" name="g-recaptcha-response" />').val(e);t.$el.find(".acf-hidden").append(e),a()}});grecaptcha.execute(e)}))},getSiteKey:function(e){e=e.$el.attr("data-recaptcha-site-key");return void 0!==e&&!1!==e?e:null}},acf.addAction("af/form/setup",af.calculated.initialize),acf.addAction("af/form/setup",af.recaptcha.initialize),af.addPostID=function(e){if(!e.hasOwnProperty("field_key"))return e;var a=e.field_key,a=c('.af-field[data-key="'+a+'"]');if(!a.length)return e;a=a.siblings(".acf-hidden").find('input[name="post_id"]');return a.length&&(e.post_id=a.val()),e},acf.addFilter("prepare_for_ajax",af.addPostID)}(jQuery);